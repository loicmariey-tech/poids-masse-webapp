<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Poids et masse (3e)</title>
    <meta name="theme-color" content="#1f7a5d" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="assets/icon-192.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <h1>Poids et masse (3e)</h1>
        <p>
          Verifier la relation <strong>P = m x g</strong> et estimer la valeur de g a partir de
          mesures.
        </p>
      </header>

      <section class="panel">
        <div class="inputs">
          <h2>Identification</h2>
          <div class="grid">
            <label>
              Nom
              <input id="nom" type="text" placeholder="Dupont" />
            </label>
            <label>
              Prenom
              <input id="prenom" type="text" placeholder="Lea" />
            </label>
            <label>
              Classe
              <input id="classe" type="text" placeholder="3e2" />
            </label>
          </div>

          <h2>Mesures</h2>
          <div class="grid">
            <label>
              Nombre de mesures
              <input id="nbMesures" type="number" min="2" max="20" value="6" />
            </label>
            <label>
              Unite de masse
              <select id="unitMasse">
                <option value="kg" selected>kg</option>
                <option value="g">g</option>
              </select>
            </label>
            <label>
              Unite de poids
              <select id="unitPoids">
                <option value="N" selected>N</option>
                <option value="mN">mN</option>
              </select>
            </label>
          </div>

          <div id="tableWrapper"></div>
          <div class="actions">
            <button id="update">Mettre a jour</button>
            <button id="export">Exporter le graphe (PNG)</button>
            <button id="exportPdf">Exporter rapport PDF</button>
            <div class="inline">
              <button id="prefill">Remplir exemple</button>
              <select id="exampleCount" aria-label="Nombre de mesures exemple">
                <option value="10">10</option>
                <option value="15" selected>15</option>
                <option value="20">20</option>
              </select>
            </div>
            <button id="resetCache">Reinitialiser cache</button>
            <label class="inline">
              <input id="fullTable" type="checkbox" />
              Tableau complet en annexe (3e page)
            </label>
            <span id="status" aria-live="polite"></span>
          </div>
          <div class="results">
            <div><strong>Regression:</strong> <span id="regLine">-</span></div>
            <div><strong>g theorique:</strong> 9.81 N/kg</div>
            <div><strong>Ecart relatif (pente):</strong> <span id="relError">-</span> %</div>
          </div>
          <div class="legend">
            <div><span class="swatch swatch-reg"></span> Regression (vert pointille)</div>
            <div><span class="swatch swatch-theo"></span> Droite theorique (bleu)</div>
            <div><span class="swatch swatch-pts"></span> Points experimentaux (rouge)</div>
          </div>
        </div>
        <div class="plot">
          <canvas id="chart" width="900" height="520"></canvas>
        </div>
      </section>

      <section class="panel info print-only hidden" id="printHeader">
        <h2>Fiche eleve</h2>
        <div class="grid">
          <div><strong>Nom :</strong> <span id="printNom">-</span></div>
          <div><strong>Prenom :</strong> <span id="printPrenom">-</span></div>
          <div><strong>Classe :</strong> <span id="printClasse">-</span></div>
        </div>
      </section>

      <section class="panel info">
        <h2>Consigne eleve</h2>
        <ul>
          <li>Verifier que les unites sont correctes (kg et N).</li>
          <li>Observer l'alignement des points.</li>
          <li>Comparer la pente a 9.81 N/kg.</li>
        </ul>
      </section>

      <section class="panel info">
        <h2>Questions</h2>
        <div class="grid">
          <label>
            1. Que remarques-tu sur l'alignement des points ?
            <textarea id="qAlign" rows="3" placeholder="..."></textarea>
          </label>
          <label>
            1bis. En maths, que signifie une droite qui passe par l'origine ?
            <textarea id="qOrigin" rows="3" placeholder="..."></textarea>
          </label>
          <label>
            2. Compare la pente de la regression a 9.81 N/kg.
            <textarea id="qCompare" rows="3" placeholder="..."></textarea>
          </label>
          <label>
            3. La precision des mesures est-elle suffisante ? Justifie.
            <textarea id="qPrecision" rows="3" placeholder="..."></textarea>
          </label>
          <label>
            Conclusion (proportionnalite P = m*g ?)
            <textarea id="qConclusion" rows="4" placeholder="..."></textarea>
          </label>
        </div>
      </section>
    </main>

    <script src="app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js");
        });
      }
    </script>
  </body>
</html>
