<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Poids et masse (3e)</title>
    <meta name="theme-color" content="#1f7a5d" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="assets/icon-192.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <h1>Poids et masse (3e)</h1>
        <p>
          Verifier la relation <strong>P = m x g</strong> et estimer la valeur de g a partir de
          mesures.
        </p>
        <div class="mode-toggle" role="group" aria-label="Mode">
          <button id="modeStudent" class="mode active">Mode eleve</button>
          <button id="modeTeacher" class="mode">Mode prof</button>
        </div>
      </header>

      <section class="panel">
        <div class="inputs">
          <h2>Identification</h2>
          <div class="grid">
            <label>
              Nom
              <input id="nom" type="text" placeholder="Dupont" />
            </label>
            <label>
              Prenom
              <input id="prenom" type="text" placeholder="Lea" />
            </label>
            <label>
              Classe
              <input id="classe" type="text" placeholder="3e2" />
            </label>
          </div>

          <h2>Mesures</h2>
          <div class="grid">
            <label>
              Nombre de mesures
              <input id="nbMesures" type="number" min="2" max="20" value="6" />
            </label>
            <label>
              Unite de masse
              <select id="unitMasse">
                <option value="kg" selected>kg</option>
                <option value="g">g</option>
              </select>
            </label>
            <label>
              Unite de poids
              <select id="unitPoids">
                <option value="N" selected>N</option>
                <option value="mN">mN</option>
              </select>
            </label>
          </div>

          <div id="tableWrapper"></div>
          <div class="actions">
            <button id="update">Mettre a jour</button>
            <button id="export">Exporter le graphe (PNG)</button>
            <button id="exportPdf">Exporter PDF</button>
            <span id="status" aria-live="polite"></span>
          </div>
          <div class="results">
            <div><strong>Regression:</strong> <span id="regLine">-</span></div>
            <div><strong>g theorique:</strong> 9.81 N/kg</div>
            <div><strong>Ecart relatif (pente):</strong> <span id="relError">-</span> %</div>
          </div>
          <div class="legend">
            <div><span class="swatch swatch-reg"></span> Regression (vert pointille)</div>
            <div><span class="swatch swatch-theo"></span> Droite theorique (bleu)</div>
            <div><span class="swatch swatch-pts"></span> Points experimentaux (rouge)</div>
          </div>
        </div>
        <div class="plot">
          <canvas id="chart" width="900" height="520"></canvas>
        </div>
      </section>

      <section class="panel info student-only">
        <h2>Consigne eleve</h2>
        <ul>
          <li>Verifier que les unites sont correctes (kg et N).</li>
          <li>Observer l'alignement des points.</li>
          <li>Comparer la pente a 9.81 N/kg.</li>
        </ul>
      </section>

      <section class="panel info teacher-only hidden">
        <h2>Mode prof</h2>
        <ul>
          <li>Attendus: regression lineaire, comparaison a 9.81 N/kg.</li>
          <li>Expliquer le sens de la pente (g) et de l'ordonnee a l'origine (b).</li>
          <li>Faire commenter l'ecart relatif sur la pente.</li>
        </ul>
      </section>
    </main>

    <script src="app.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("./sw.js");
        });
      }
    </script>
  </body>
</html>
